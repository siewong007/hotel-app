import{i as P,ab as S,r as i,H as G,j as e,ax as l,C as I,T as t,p as y,A as g,o as x,B as c,D as b}from"./index-DnWmqzJF.js";import{G as r}from"./Grid-0tqG7FTE.js";import{f as A}from"./format-DjXxzLAN.js";const W=()=>{const d=P(),[v]=S(),o=v.get("token"),[n,f]=i.useState(null),[a,k]=i.useState(null),[p,h]=i.useState(!0),[u,m]=i.useState(null);i.useEffect(()=>{if(!o){m("Invalid or missing verification token"),h(!1);return}_()},[o]);const _=async()=>{try{const s=await G.guestPortalGetBooking(o);f(s.booking),k(s.guest)}catch(s){m(s.message||"Failed to load booking information")}finally{h(!1)}},B=()=>{d(`/guest-checkin/form?token=${o}`)};if(p)return e.jsxs(l,{maxWidth:"sm",sx:{mt:8,textAlign:"center"},children:[e.jsx(I,{}),e.jsx(t,{sx:{mt:2},children:"Loading your booking..."})]});if(u||!n||!a)return e.jsx(l,{maxWidth:"sm",sx:{mt:8},children:e.jsxs(y,{elevation:3,sx:{p:4},children:[e.jsx(g,{severity:"error",children:u||"Booking not found"}),e.jsx(x,{variant:"outlined",fullWidth:!0,sx:{mt:3},onClick:()=>d("/guest-checkin"),children:"Back to Start"})]})});const j=s=>{try{return A(new Date(s),"EEEE, MMMM d, yyyy")}catch{return s}},C=()=>{const s=new Date(n.check_in_date),E=new Date(n.check_out_date),D=Math.abs(E.getTime()-s.getTime());return Math.ceil(D/(1e3*60*60*24))};return e.jsx(l,{maxWidth:"md",sx:{mt:8,mb:4},children:e.jsxs(y,{elevation:3,sx:{p:4},children:[e.jsxs(c,{sx:{textAlign:"center",mb:4},children:[e.jsx(t,{variant:"h4",component:"h1",gutterBottom:!0,children:"Your Booking Details"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"Please review your booking information before continuing"})]}),e.jsxs(c,{sx:{mb:4},children:[e.jsx(t,{variant:"h6",color:"primary",gutterBottom:!0,children:"Guest Information"}),e.jsx(b,{sx:{mb:2}}),e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Name:"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",fontWeight:"bold",children:a.full_name})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Email:"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",children:a.email})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Phone:"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",children:a.phone||"Not provided"})})]})]}),e.jsxs(c,{sx:{mb:4},children:[e.jsx(t,{variant:"h6",color:"primary",gutterBottom:!0,children:"Stay Information"}),e.jsx(b,{sx:{mb:2}}),e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Booking Number:"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",fontWeight:"bold",children:n.folio_number||n.id})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Check-in:"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",children:j(n.check_in_date)})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Check-out:"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",children:j(n.check_out_date)})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Nights:"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",children:C()})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Room Type:"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",children:n.room_type||"Standard"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Guests:"})}),e.jsx(r,{item:!0,xs:6,children:e.jsxs(t,{variant:"body2",children:[n.number_of_guests||1," Adult(s)"]})})]})]}),n.pre_checkin_completed&&e.jsx(g,{severity:"success",sx:{mb:3},children:"You have already completed pre-check-in for this booking."}),e.jsxs(c,{sx:{display:"flex",gap:2},children:[e.jsx(x,{variant:"outlined",onClick:()=>d("/guest-checkin"),sx:{flex:1},children:"Cancel"}),e.jsx(x,{variant:"contained",onClick:B,sx:{flex:1},size:"large",children:"Continue to Update Information"})]})]})})};export{W as GuestCheckInVerify,W as default};
