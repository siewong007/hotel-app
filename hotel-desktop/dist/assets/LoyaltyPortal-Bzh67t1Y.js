import{l as Le,j as e,R as A,c as ge,r as C,o as ae,B as g,T as h,I as Ke,A as G,n as se,C as Me,H as We,_ as He,$ as be,W as Ve,Y as Ge,a0 as Ue,a1 as q}from"./index-DnWmqzJF.js";import{D as Qe,a as Ye,b as qe,c as Xe}from"./DialogTitle-DKxRfOzX.js";import{C as Je}from"./Close-93h3i8eI.js";import{I as Ae}from"./InputAdornment-BrN3aL1-.js";import{A as _e}from"./Add-C7DSqfba.js";import{G as w}from"./Grid-0tqG7FTE.js";import{C as T,a as D}from"./CardContent-BhQI87uj.js";import{L as Pe}from"./LinearProgress-ZsFGqIbl.js";import{S as Ce,T as Se}from"./Stars-CybQ7iD1.js";import{T as we}from"./TrendingUp-BioqpNbz.js";import{i as Ze,D as et,f as tt,E as rt,d as oe,e as X,g as nt,A as it,h as V,j as at,k as ye,l as st,m as ot,n as ze,u as lt,G as ct,o as Te,p as dt,X as te,Y as re,q as ht,R as J,P as ut,a as mt,C as De,T as Z,B as ke,b as le,L as ce,c as de}from"./PieChart-Ba5_fMJJ.js";import{T as he,a as ue,b as me,c as M,d as m,e as xe}from"./TableRow-B78mTfEk.js";import{C as pe}from"./Chip-CSuofl6d.js";const fe=Le(e.jsx("path",{d:"M9.5 6.5v3h-3v-3zM11 5H5v6h6zm-1.5 9.5v3h-3v-3zM11 13H5v6h6zm6.5-6.5v3h-3v-3zM19 5h-6v6h6zm-6 8h1.5v1.5H13zm1.5 1.5H16V16h-1.5zM16 13h1.5v1.5H16zm-3 3h1.5v1.5H13zm1.5 1.5H16V19h-1.5zM16 16h1.5v1.5H16zm1.5-1.5H19V16h-1.5zm0 3H19V19h-1.5zM22 7h-2V4h-3V2h5zm0 15v-5h-2v3h-3v2zM2 22h5v-2H4v-3H2zM2 2v5h2V4h3V2z"}),"QrCodeScanner"),xt=Le(e.jsx("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline");var pt=["type","layout","connectNulls","ref"],ft=["key"];function z(t){"@babel/helpers - typeof";return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},z(t)}function Ie(t,i){if(t==null)return{};var n=yt(t,i),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(i.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yt(t,i){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(i.indexOf(r)>=0)continue;n[r]=t[r]}return n}function U(){return U=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U.apply(this,arguments)}function Oe(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function P(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?Oe(Object(n),!0).forEach(function(r){k(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W(t){return bt(t)||gt(t)||jt(t)||vt()}function vt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jt(t,i){if(t){if(typeof t=="string")return ve(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(t,i)}}function gt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bt(t){if(Array.isArray(t))return ve(t)}function ve(t,i){(i==null||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function At(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function Ee(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ne(r.key),r)}}function _t(t,i,n){return i&&Ee(t.prototype,i),n&&Ee(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pt(t,i,n){return i=ne(i),Ct(t,Be()?Reflect.construct(i,n||[],ne(t).constructor):i.apply(t,n))}function Ct(t,i){if(i&&(z(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return St(t)}function St(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Be(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Be=function(){return!!t})()}function ne(t){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ne(t)}function wt(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&je(t,i)}function je(t,i){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},je(t,i)}function k(t,i,n){return i=Ne(i),i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function Ne(t){var i=Tt(t,"string");return z(i)=="symbol"?i:i+""}function Tt(t,i){if(z(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,i);if(z(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var B=function(t){function i(){var n;At(this,i);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return n=Pt(this,i,[].concat(s)),k(n,"state",{isAnimationFinished:!0,totalLength:0}),k(n,"generateSimpleStrokeDasharray",function(o,c){return"".concat(c,"px ").concat(o-c,"px")}),k(n,"getStrokeDasharray",function(o,c,x){var p=x.reduce(function(S,j){return S+j});if(!p)return n.generateSimpleStrokeDasharray(c,o);for(var f=Math.floor(o/p),v=o%p,d=c-o,y=[],a=0,u=0;a<x.length;u+=x[a],++a)if(u+x[a]>v){y=[].concat(W(x.slice(0,a)),[v-u]);break}var b=y.length%2===0?[0,d]:[d];return[].concat(W(i.repeat(x,f)),W(y),b).map(function(S){return"".concat(S,"px")}).join(", ")}),k(n,"id",lt("recharts-line-")),k(n,"pathRef",function(o){n.mainCurve=o}),k(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),k(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return wt(i,t),_t(i,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,o=l.points,c=l.xAxis,x=l.yAxis,p=l.layout,f=l.children,v=tt(f,rt);if(!v)return null;var d=function(u,b){return{x:u.x,y:u.y,value:u.value,errorVal:ze(u.payload,b)}},y={clipPath:r?"url(#clipPath-".concat(s,")"):null};return A.createElement(oe,y,v.map(function(a){return A.cloneElement(a,{key:"bar-".concat(a.props.dataKey),data:o,xAxis:c,yAxis:x,layout:p,dataPointFormatter:d})}))}},{key:"renderDots",value:function(r,s,l){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var c=this.props,x=c.dot,p=c.points,f=c.dataKey,v=X(this.props,!1),d=X(x,!0),y=p.map(function(u,b){var S=P(P(P({key:"dot-".concat(b),r:3},v),d),{},{index:b,cx:u.x,cy:u.y,value:u.value,dataKey:f,payload:u.payload,points:p});return i.renderDotItem(x,S)}),a={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(l,")"):null};return A.createElement(oe,U({className:"recharts-line-dots",key:"dots"},a),y)}},{key:"renderCurveStatically",value:function(r,s,l,o){var c=this.props,x=c.type,p=c.layout,f=c.connectNulls;c.ref;var v=Ie(c,pt),d=P(P(P({},X(v,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(l,")"):null,points:r},o),{},{type:x,layout:p,connectNulls:f});return A.createElement(nt,U({},d,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,s){var l=this,o=this.props,c=o.points,x=o.strokeDasharray,p=o.isAnimationActive,f=o.animationBegin,v=o.animationDuration,d=o.animationEasing,y=o.animationId,a=o.animateNewValues,u=o.width,b=o.height,S=this.state,j=S.prevPoints,N=S.totalLength;return A.createElement(it,{begin:f,duration:v,isActive:p,easing:d,from:{t:0},to:{t:1},key:"line-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(E){var I=E.t;if(j){var R=j.length/c.length,O=c.map(function(_,ie){var K=Math.floor(ie*R);if(j[K]){var H=j[K],L=V(H.x,_.x),Re=V(H.y,_.y);return P(P({},_),{},{x:L(I),y:Re(I)})}if(a){var Fe=V(u*2,_.x),$e=V(b/2,_.y);return P(P({},_),{},{x:Fe(I),y:$e(I)})}return P(P({},_),{},{x:_.x,y:_.y})});return l.renderCurveStatically(O,r,s)}var Q=V(0,N),F=Q(I),$;if(x){var Y="".concat(x).split(/[,\s]+/gim).map(function(_){return parseFloat(_)});$=l.getStrokeDasharray(F,N,Y)}else $=l.generateSimpleStrokeDasharray(N,F);return l.renderCurveStatically(c,r,s,{strokeDasharray:$})})}},{key:"renderCurve",value:function(r,s){var l=this.props,o=l.points,c=l.isAnimationActive,x=this.state,p=x.prevPoints,f=x.totalLength;return c&&o&&o.length&&(!p&&f>0||!at(p,o))?this.renderCurveWithAnimation(r,s):this.renderCurveStatically(o,r,s)}},{key:"render",value:function(){var r,s=this.props,l=s.hide,o=s.dot,c=s.points,x=s.className,p=s.xAxis,f=s.yAxis,v=s.top,d=s.left,y=s.width,a=s.height,u=s.isAnimationActive,b=s.id;if(l||!c||!c.length)return null;var S=this.state.isAnimationFinished,j=c.length===1,N=ge("recharts-line",x),E=p&&p.allowDataOverflow,I=f&&f.allowDataOverflow,R=E||I,O=ye(b)?this.id:b,Q=(r=X(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},F=Q.r,$=F===void 0?3:F,Y=Q.strokeWidth,_=Y===void 0?2:Y,ie=st(o)?o:{},K=ie.clipDot,H=K===void 0?!0:K,L=$*2+_;return A.createElement(oe,{className:N},E||I?A.createElement("defs",null,A.createElement("clipPath",{id:"clipPath-".concat(O)},A.createElement("rect",{x:E?d:d-y/2,y:I?v:v-a/2,width:E?y:y*2,height:I?a:a*2})),!H&&A.createElement("clipPath",{id:"clipPath-dots-".concat(O)},A.createElement("rect",{x:d-L/2,y:v-L/2,width:y+L,height:a+L}))):null,!j&&this.renderCurve(R,O),this.renderErrorBar(R,O),(j||o)&&this.renderDots(R,H,O),(!u||S)&&ot.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,s){for(var l=r.length%2!==0?[].concat(W(r),[0]):r,o=[],c=0;c<s;++c)o=[].concat(W(o),W(l));return o}},{key:"renderDotItem",value:function(r,s){var l;if(A.isValidElement(r))l=A.cloneElement(r,s);else if(Ze(r))l=r(s);else{var o=s.key,c=Ie(s,ft),x=ge("recharts-line-dot",typeof r!="boolean"?r.className:"");l=A.createElement(et,U({key:o},c,{className:x}))}return l}}])}(C.PureComponent);k(B,"displayName","Line");k(B,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ct.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});k(B,"getComposedData",function(t){var i=t.props,n=t.xAxis,r=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,o=t.dataKey,c=t.bandSize,x=t.displayedData,p=t.offset,f=i.layout,v=x.map(function(d,y){var a=ze(d,o);return f==="horizontal"?{x:Te({axis:n,ticks:s,bandSize:c,entry:d,index:y}),y:ye(a)?null:r.scale(a),value:a,payload:d}:{x:ye(a)?null:n.scale(a),y:Te({axis:r,ticks:l,bandSize:c,entry:d,index:y}),value:a,payload:d}});return P({points:v,layout:f},p)});var Dt=dt({chartName:"LineChart",GraphicalChild:B,axisComponents:[{axisType:"xAxis",AxisComp:te},{axisType:"yAxis",AxisComp:re}],formatAxisMap:ht});const kt=({onSuccess:t})=>{const[i,n]=C.useState(!1),[r,s]=C.useState(""),[l,o]=C.useState(100),[c,x]=C.useState(""),[p,f]=C.useState(!1),[v,d]=C.useState(null),[y,a]=C.useState(null),u=()=>{n(!0),d(null),a(null)},b=()=>{n(!1),s(""),o(100),x(""),d(null),a(null)},S=async()=>{if(!r.trim()){d("Please enter a membership number");return}if(l<=0){d("Points must be greater than 0");return}try{f(!0),d(null);const j=r.includes("-")?parseInt(r.split("-")[1]):parseInt(r);if(isNaN(j)){d("Invalid membership number format");return}await We.addPointsToMembership(j,l,c||"Points added via scanner"),a(`Successfully added ${l} points to membership ${r}`),setTimeout(()=>{t&&t(),b()},2e3)}catch(j){console.error("Failed to add points:",j),d(j.message||"Failed to add points. Please check the membership number.")}finally{f(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(ae,{variant:"contained",color:"primary",startIcon:e.jsx(fe,{}),onClick:u,size:"large",children:"Scan Membership QR"}),e.jsxs(Qe,{open:i,onClose:b,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Ye,{children:e.jsxs(g,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(g,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(fe,{color:"primary"}),e.jsx(h,{variant:"h6",children:"Add Membership Points"})]}),e.jsx(Ke,{onClick:b,size:"small",children:e.jsx(Je,{})})]})}),e.jsx(qe,{children:e.jsxs(g,{sx:{display:"flex",flexDirection:"column",gap:3,pt:2},children:[e.jsx(G,{severity:"info",children:"Enter the membership number from the QR code or membership card to add points."}),v&&e.jsx(G,{severity:"error",onClose:()=>d(null),children:v}),y&&e.jsx(G,{severity:"success",children:y}),e.jsx(se,{fullWidth:!0,label:"Membership Number",placeholder:"e.g., MEMBER-123 or 123",value:r,onChange:j=>s(j.target.value),disabled:p||!!y,autoFocus:!0,InputProps:{startAdornment:e.jsx(Ae,{position:"start",children:e.jsx(fe,{color:"action"})})},helperText:"Scan QR code or enter membership number manually"}),e.jsx(se,{fullWidth:!0,type:"number",label:"Points to Add",value:l,onChange:j=>o(parseInt(j.target.value)||0),disabled:p||!!y,inputProps:{min:1,step:1},InputProps:{startAdornment:e.jsx(Ae,{position:"start",children:e.jsx(_e,{color:"action"})})}}),e.jsx(se,{fullWidth:!0,label:"Description (Optional)",placeholder:"e.g., Purchase reward, Check-in bonus",value:c,onChange:j=>x(j.target.value),disabled:p||!!y,multiline:!0,rows:2}),e.jsxs(g,{sx:{p:2,bgcolor:"primary.light",borderRadius:1,border:"2px dashed",borderColor:"primary.main"},children:[e.jsx(h,{variant:"body2",color:"primary.dark",gutterBottom:!0,sx:{fontWeight:600},children:"QR Code Scanning Instructions:"}),e.jsxs(h,{variant:"caption",color:"primary.dark",children:["1. Use your device camera to scan the membership QR code",e.jsx("br",{}),"2. The membership number will appear in the field above",e.jsx("br",{}),"3. Adjust points if needed and add a description",e.jsx("br",{}),'4. Click "Add Points" to complete the transaction']})]})]})}),e.jsxs(Xe,{sx:{px:3,pb:2},children:[e.jsx(ae,{onClick:b,disabled:p,children:"Cancel"}),e.jsx(ae,{variant:"contained",onClick:S,disabled:p||!!y||!r,startIcon:p?e.jsx(Me,{size:20}):e.jsx(_e,{}),children:p?"Adding...":"Add Points"})]})]})]})};function ee(t){const{children:i,value:n,index:r,...s}=t;return e.jsx("div",{role:"tabpanel",hidden:n!==r,id:`loyalty-tabpanel-${r}`,"aria-labelledby":`loyalty-tab-${r}`,...s,children:n===r&&e.jsx(g,{sx:{pt:3},children:i})})}const It={1:"#CD7F32",2:"#C0C0C0",3:"#FFD700",4:"#E5E4E2"},Ot={1:"Bronze",2:"Silver",3:"Gold",4:"Platinum"},Gt=()=>{const[t,i]=C.useState(null),[n,r]=C.useState(!0),[s,l]=C.useState(null),[o,c]=C.useState(0);C.useEffect(()=>{x()},[]);const x=async()=>{try{r(!0),l(null);const a=await We.getLoyaltyStatistics();i(a)}catch(a){a instanceof He?l(a.message):l("Failed to load loyalty statistics"),console.error("Error loading loyalty statistics:",a)}finally{r(!1)}},p=(a,u)=>{c(u)},f=a=>new Intl.NumberFormat("en-US").format(a),v=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),d=a=>It[a.toString()]||"#666",y=a=>Ot[a]||`Tier ${a}`;return n?e.jsx(g,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx(Me,{size:60})}):s?e.jsxs(G,{severity:"error",children:[e.jsx(be,{children:"Error"}),s]}):t?e.jsxs(g,{children:[e.jsxs(g,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(g,{children:[e.jsx(h,{variant:"h4",gutterBottom:!0,sx:{fontWeight:700,color:"primary.main"},children:"Customer Loyalty Portal"}),e.jsx(h,{variant:"body1",color:"text.secondary",children:"Comprehensive insights into your loyalty program performance"})]}),e.jsx(kt,{onSuccess:x})]}),e.jsxs(w,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(w,{item:!0,xs:12,sm:6,md:3,children:e.jsx(T,{sx:{height:"100%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:e.jsxs(D,{children:[e.jsxs(g,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ve,{sx:{fontSize:40,color:"white",mr:2}}),e.jsxs(g,{children:[e.jsx(h,{variant:"h4",sx:{color:"white",fontWeight:700},children:f(t.total_members)}),e.jsx(h,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)"},children:"Total Members"})]})]}),e.jsx(Pe,{variant:"determinate",value:t.active_members/t.total_members*100,sx:{height:6,borderRadius:3,backgroundColor:"rgba(255,255,255,0.3)","& .MuiLinearProgress-bar":{backgroundColor:"white"}}}),e.jsxs(h,{variant:"caption",sx:{color:"rgba(255,255,255,0.9)",mt:1},children:[t.active_members," active (",Math.round(t.active_members/t.total_members*100),"%)"]})]})})}),e.jsx(w,{item:!0,xs:12,sm:6,md:3,children:e.jsx(T,{sx:{height:"100%",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:e.jsxs(D,{children:[e.jsxs(g,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ce,{sx:{fontSize:40,color:"white",mr:2}}),e.jsxs(g,{children:[e.jsx(h,{variant:"h4",sx:{color:"white",fontWeight:700},children:f(t.total_points_active)}),e.jsx(h,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)"},children:"Active Points"})]})]}),e.jsxs(h,{variant:"caption",sx:{color:"rgba(255,255,255,0.9)"},children:["Avg: ",f(Math.round(t.average_points_per_member))," per member"]})]})})}),e.jsx(w,{item:!0,xs:12,sm:6,md:3,children:e.jsx(T,{sx:{height:"100%",background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},children:e.jsxs(D,{children:[e.jsxs(g,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(we,{sx:{fontSize:40,color:"white",mr:2}}),e.jsxs(g,{children:[e.jsx(h,{variant:"h4",sx:{color:"white",fontWeight:700},children:f(t.total_points_issued)}),e.jsx(h,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)"},children:"Points Issued"})]})]}),e.jsx(h,{variant:"caption",sx:{color:"rgba(255,255,255,0.9)"},children:"Lifetime total earned"})]})})}),e.jsx(w,{item:!0,xs:12,sm:6,md:3,children:e.jsx(T,{sx:{height:"100%",background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)"},children:e.jsxs(D,{children:[e.jsxs(g,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ge,{sx:{fontSize:40,color:"white",mr:2}}),e.jsxs(g,{children:[e.jsx(h,{variant:"h4",sx:{color:"white",fontWeight:700},children:f(t.total_points_redeemed)}),e.jsx(h,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)"},children:"Points Redeemed"})]})]}),e.jsxs(h,{variant:"caption",sx:{color:"rgba(255,255,255,0.9)"},children:[Math.round(t.total_points_redeemed/t.total_points_issued*100),"% redemption rate"]})]})})})]}),e.jsx(T,{sx:{mb:3},children:e.jsxs(Ue,{value:o,onChange:p,variant:"scrollable",scrollButtons:"auto",children:[e.jsx(q,{label:"Tier Distribution",icon:e.jsx(Se,{}),iconPosition:"start"}),e.jsx(q,{label:"Top Members",icon:e.jsx(Ce,{}),iconPosition:"start"}),e.jsx(q,{label:"Recent Activity",icon:e.jsx(xt,{}),iconPosition:"start"}),e.jsx(q,{label:"Growth Trends",icon:e.jsx(we,{}),iconPosition:"start"})]})}),e.jsx(ee,{value:o,index:0,children:e.jsxs(w,{container:!0,spacing:3,children:[e.jsx(w,{item:!0,xs:12,md:6,children:e.jsx(T,{children:e.jsxs(D,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Members by Tier"}),e.jsx(J,{width:"100%",height:300,children:e.jsxs(ut,{children:[e.jsx(mt,{data:t.members_by_tier,dataKey:"count",nameKey:"tier_name",cx:"50%",cy:"50%",outerRadius:100,label:({tier_name:a,percentage:u})=>`${a}: ${u.toFixed(1)}%`,children:t.members_by_tier.map((a,u)=>e.jsx(De,{fill:d(a.tier_level)},`cell-${u}`))}),e.jsx(Z,{})]})})]})})}),e.jsx(w,{item:!0,xs:12,md:6,children:e.jsx(T,{children:e.jsxs(D,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Tier Breakdown"}),e.jsx(J,{width:"100%",height:300,children:e.jsxs(ke,{data:t.members_by_tier,children:[e.jsx(le,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"tier_name"}),e.jsx(re,{}),e.jsx(Z,{}),e.jsx(ce,{}),e.jsx(de,{dataKey:"count",name:"Members",children:t.members_by_tier.map((a,u)=>e.jsx(De,{fill:d(a.tier_level)},`cell-${u}`))})]})})]})})}),e.jsx(w,{item:!0,xs:12,children:e.jsx(T,{children:e.jsxs(D,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Tier Statistics"}),e.jsx(he,{children:e.jsxs(ue,{children:[e.jsx(me,{children:e.jsxs(M,{children:[e.jsx(m,{children:"Tier"}),e.jsx(m,{align:"right",children:"Members"}),e.jsx(m,{align:"right",children:"Percentage"}),e.jsx(m,{align:"right",children:"Progress"})]})}),e.jsx(xe,{children:t.members_by_tier.map(a=>e.jsxs(M,{children:[e.jsx(m,{children:e.jsx(pe,{label:a.tier_name,size:"small",sx:{backgroundColor:d(a.tier_level),color:"white",fontWeight:600}})}),e.jsx(m,{align:"right",children:f(a.count)}),e.jsxs(m,{align:"right",children:[a.percentage.toFixed(1),"%"]}),e.jsx(m,{align:"right",children:e.jsx(g,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(Pe,{variant:"determinate",value:a.percentage,sx:{flexGrow:1,height:8,borderRadius:4,backgroundColor:"rgba(0,0,0,0.1)","& .MuiLinearProgress-bar":{backgroundColor:d(a.tier_level)}}})})})]},a.tier_level))})]})})]})})})]})}),e.jsx(ee,{value:o,index:1,children:e.jsx(T,{children:e.jsxs(D,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Top Loyalty Members"}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Our most valued customers with the highest loyalty points"}),e.jsx(he,{children:e.jsxs(ue,{children:[e.jsx(me,{children:e.jsxs(M,{children:[e.jsx(m,{children:"Rank"}),e.jsx(m,{children:"Guest Name"}),e.jsx(m,{children:"Email"}),e.jsx(m,{children:"Tier"}),e.jsx(m,{align:"right",children:"Points Balance"}),e.jsx(m,{align:"right",children:"Lifetime Points"}),e.jsx(m,{children:"Membership #"})]})}),e.jsx(xe,{children:t.top_members.map((a,u)=>e.jsxs(M,{hover:!0,children:[e.jsx(m,{children:e.jsxs(g,{sx:{display:"flex",alignItems:"center"},children:[u<3&&e.jsx(Se,{sx:{mr:1,color:u===0?"#FFD700":u===1?"#C0C0C0":"#CD7F32"}}),e.jsxs(h,{variant:"body2",sx:{fontWeight:600},children:["#",u+1]})]})}),e.jsx(m,{children:e.jsx(h,{variant:"body2",sx:{fontWeight:500},children:a.guest_name})}),e.jsx(m,{children:a.guest_email}),e.jsx(m,{children:e.jsx(pe,{label:y(a.tier_level),size:"small",sx:{backgroundColor:d(a.tier_level),color:"white",fontWeight:600}})}),e.jsx(m,{align:"right",children:e.jsx(h,{variant:"body2",sx:{fontWeight:600,color:"primary.main"},children:f(a.points_balance)})}),e.jsx(m,{align:"right",children:f(a.lifetime_points)}),e.jsx(m,{children:e.jsx(h,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"0.85rem"},children:a.membership_number})})]},a.membership_number))})]})})]})})}),e.jsx(ee,{value:o,index:2,children:e.jsx(T,{children:e.jsxs(D,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Recent Points Transactions"}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Latest loyalty points activity across all members"}),e.jsx(he,{children:e.jsxs(ue,{children:[e.jsx(me,{children:e.jsxs(M,{children:[e.jsx(m,{children:"Date"}),e.jsx(m,{children:"Guest"}),e.jsx(m,{children:"Transaction Type"}),e.jsx(m,{align:"right",children:"Points"}),e.jsx(m,{children:"Description"})]})}),e.jsx(xe,{children:t.recent_transactions.map(a=>e.jsxs(M,{hover:!0,children:[e.jsx(m,{children:v(a.created_at)}),e.jsx(m,{children:e.jsx(h,{variant:"body2",sx:{fontWeight:500},children:a.guest_name})}),e.jsx(m,{children:e.jsx(pe,{label:a.transaction_type.toUpperCase(),size:"small",color:a.transaction_type==="earn"?"success":a.transaction_type==="redeem"?"warning":a.transaction_type==="expire"?"error":"default",sx:{fontWeight:600}})}),e.jsx(m,{align:"right",children:e.jsxs(h,{variant:"body2",sx:{fontWeight:600,color:a.transaction_type==="earn"?"success.main":a.transaction_type==="redeem"?"warning.main":"error.main"},children:[a.transaction_type==="earn"?"+":"-",f(Math.abs(a.points_amount))]})}),e.jsx(m,{children:e.jsx(h,{variant:"body2",color:"text.secondary",children:a.description||"No description"})})]},a.id))})]})})]})})}),e.jsx(ee,{value:o,index:3,children:e.jsxs(w,{container:!0,spacing:3,children:[e.jsx(w,{item:!0,xs:12,children:e.jsx(T,{children:e.jsxs(D,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Membership Growth"}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"New member enrollments and total membership over time"}),e.jsx(J,{width:"100%",height:300,children:e.jsxs(Dt,{data:t.membership_growth,children:[e.jsx(le,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"date"}),e.jsx(re,{}),e.jsx(Z,{}),e.jsx(ce,{}),e.jsx(B,{type:"monotone",dataKey:"new_members",name:"New Members",stroke:"#4facfe",strokeWidth:2,dot:{r:4}}),e.jsx(B,{type:"monotone",dataKey:"total_members",name:"Total Members",stroke:"#667eea",strokeWidth:2,dot:{r:4}})]})})]})})}),e.jsx(w,{item:!0,xs:12,children:e.jsx(T,{children:e.jsxs(D,{children:[e.jsx(h,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"Points Activity Trends"}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Points earned vs redeemed over time"}),e.jsx(J,{width:"100%",height:300,children:e.jsxs(ke,{data:t.points_activity,children:[e.jsx(le,{strokeDasharray:"3 3"}),e.jsx(te,{dataKey:"date"}),e.jsx(re,{}),e.jsx(Z,{}),e.jsx(ce,{}),e.jsx(de,{dataKey:"points_earned",name:"Points Earned",fill:"#4facfe"}),e.jsx(de,{dataKey:"points_redeemed",name:"Points Redeemed",fill:"#fa709a"})]})})]})})})]})})]}):e.jsxs(G,{severity:"info",children:[e.jsx(be,{children:"No Data"}),"No loyalty statistics available at this time."]})};export{Gt as default};
