import{ab as b,i as y,r as t,j as e,B as i,ax as j,p as E,T as r,C as k,A as x,o as f,H as w}from"./index-DnWmqzJF.js";import{E as C}from"./Email-DOxjQW6A.js";import{C as I}from"./CheckCircle-B5gS3fbx.js";import{E as V}from"./Error-B8gOibaO.js";const P=()=>{const[v]=b(),s=y(),[c,l]=t.useState("loading"),[h,d]=t.useState(""),[m,p]=t.useState(5),n=t.useRef(null),a=t.useRef(!0),u=v.get("token");t.useEffect(()=>{if(a.current=!0,!u){l("error"),d("Invalid verification link. No token provided.");return}return(async()=>{try{if(await w.verifyEmail(u),!a.current)return;l("success"),d("Email verified successfully!"),n.current=setInterval(()=>{a.current&&p(o=>o<=1?(n.current&&clearInterval(n.current),s("/login"),0):o-1)},1e3)}catch(o){if(!a.current)return;l("error"),d(o.message||"Email verification failed. The link may be expired or invalid.")}})(),()=>{a.current=!1,n.current&&clearInterval(n.current)}},[u,s]);const g=()=>{s("/login")};return e.jsx(i,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,opacity:.3}},children:e.jsx(j,{maxWidth:"sm",sx:{position:"relative",zIndex:1},children:e.jsxs(E,{elevation:24,sx:{p:5,width:"100%",borderRadius:3,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",textAlign:"center"},children:[e.jsxs(i,{sx:{mb:4},children:[e.jsx(i,{sx:{display:"inline-flex",p:2,borderRadius:2,background:"linear-gradient(135deg, #1a73e8 0%, #4285f4 100%)",mb:2},children:e.jsx(C,{sx:{fontSize:48,color:"white"}})}),e.jsx(r,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:700,color:"text.primary"},children:"Email Verification"})]}),c==="loading"&&e.jsxs(i,{sx:{py:4},children:[e.jsx(k,{size:60,sx:{mb:2}}),e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Verifying your email..."}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Please wait while we verify your email address."})]}),c==="success"&&e.jsxs(i,{sx:{py:4},children:[e.jsx(I,{sx:{fontSize:60,color:"success.main",mb:2}}),e.jsx(r,{variant:"h6",gutterBottom:!0,sx:{color:"success.main"},children:h}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"You can now log in to your account."}),e.jsxs(x,{severity:"info",sx:{mb:3},children:["Redirecting to login page in ",m," seconds..."]}),e.jsx(f,{variant:"contained",onClick:g,sx:{background:"linear-gradient(135deg, #1a73e8 0%, #4285f4 100%)",fontWeight:600,"&:hover":{background:"linear-gradient(135deg, #1557b0 0%, #1a73e8 100%)"}},children:"Go to Login"})]}),c==="error"&&e.jsxs(i,{sx:{py:4},children:[e.jsx(V,{sx:{fontSize:60,color:"error.main",mb:2}}),e.jsx(r,{variant:"h6",gutterBottom:!0,sx:{color:"error.main"},children:"Verification Failed"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:3},children:h}),e.jsx(x,{severity:"warning",sx:{mb:3},children:"If you need a new verification link, please contact support."}),e.jsx(f,{variant:"contained",onClick:g,sx:{background:"linear-gradient(135deg, #1a73e8 0%, #4285f4 100%)",fontWeight:600,"&:hover":{background:"linear-gradient(135deg, #1557b0 0%, #1a73e8 100%)"}},children:"Back to Login"})]})]})})})};export{P as default};
